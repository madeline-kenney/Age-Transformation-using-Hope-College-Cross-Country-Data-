# Age Transformation


## Key Takeaways

- Basic features present and consistent; still not a perfect match nor
  fully realistic representation of aging (ex. highly airbrushed
  versions).

- Despite a large time span of 10 years between each output, the model
  does not seem to capture significant changes between consecutive
  outputs.

- Interesting patterns: quality diminishes with color variations, such
  as varying hair tones and face contours/highlights, even though the
  original photos were high quality; generated output often gives
  bucked/gapped teeth for age 0 output; generated output often gives
  wrinkles and eye redness for ages 70-100 outputs.

- Room for improvement and untapped potential for investment, research,
  and use

## Introduction

Interested in the capability of being able to look at prior and future
versions of oneself, I explored age transformation using a style-based
age manipulation (SAM) model. To do so, I used my former cross country
team’s dataset, which included historical photos of each athlete
throughout prior seasons on the team. on Hope College Women’s 2024 Cross
Country Roster data. I was specifcally interested in comparing the 20
year old SAM generated output to the real photo of the athletes. To do
so, the first phase of my project involved scraping the data from Hope
College’s athletic website as seen in the code below (see each section
below for a more in-depth explanation of my specific scraping steps –
ask about this). The second phase of my project involved running my
scraped output (i.e. the jpg photo links for each athelete for each of
their seasons on the team) through the SAM model. The SAM model that I
used is referenced in the “Links” section below. To note, I included
both the original SAM model provided by \[author’s name\] as well as a
copy of the model that I edited to fit my particular data. The key
changes I made to the model include changing the image paths to and
adding code to slice out for the twenty year old image. The final phase
of my project involved comparing the original, real photo of each
athlete to specifically the 20 year old age output generated by the SAM
model as well as comparing overall the model’s regression across a span
of 100 years with each output broken up by decade (i.e. a total of 10
output ages for each athlete)…

Do I state simialr themes to my slides? (my findings and why this is
important?)

``` python
2 + 2
```

## Scraping Hope College 2024 Women’s Cross Country Roster

I first downloaded the necessary packages and the Hope College 2024
Women’s Roster page to then convert the link to Beautiful Soup.

``` python
import requests
from bs4 import BeautifulSoup
import re
import pandas as pd
```

``` python
roster_url = "https://athletics.hope.edu/sports/womens-cross-country/roster/2024"

page = requests.get(roster_url)
soup = BeautifulSoup(page.content, "html.parser")
```

``` python
athlete_urls = []
homepage = "https://athletics.hope.edu"

for athlete in soup.select (".sidearm-roster-player-name a"): 
    athlete_urls.append(homepage + athlete["href"])

data = []

for link in athlete_urls: 
    page = requests.get(link)
    athlete_soup = BeautifulSoup(page.content, "html.parser")
    athlete_name = athlete_soup.select_one(".sidearm-roster-player-name")
    name = athlete_name.text.strip() 
    image_links = athlete_soup.select(".sidearm-roster-player-image-historical.relative.lazy") 

    urls = []
    for img in image_links: 
        style = img["style"]
        if "url(" in style:
            url_part = style.split("url(")[1].split(")")[0]
            cleaned = url_part.strip("'\"")
            urls.append(cleaned)

    test_links = [re.sub("/", "%2f", x) for x in urls]

    complete_links = []
    for x in test_links:
        photo_link = ( 
            "https://images.sidearmdev.com/convert?"
            "url=https%3a%2f%2fdxbhsrqyrr690.cloudfront.net"
            "%2fsidearm.nextgen.sites%2fathletics.hope.edu"
            f"{x}&type=png")
        complete_links.append(photo_link)

    for photo in complete_links:
        data.append({
            "Name": name,
            "Url": photo
        })


df = pd.DataFrame(data)
df
```

``` python
import os
import requests

desktop = os.path.join(os.path.expanduser("~"), "Desktop", "HopeXC_Photos")
os.makedirs(desktop)
```

``` python
for info, row in df.iterrows():
    name = row["Name"].replace(" ", "_")
    url = row["Url"]

    athlete_folder = os.path.join(desktop, name)
    os.makedirs(athlete_folder, exist_ok=True)

    filename = os.path.join(athlete_folder, f"photo_{info}.png")

    img_data = requests.get(url).content
    with open(filename, "wb") as f: 
        f.write(img_data)
```

## Links

SAM model co-lab notebook (orginal, unedited version):
https://colab.research.google.com/github/yuval-alaluf/SAM/blob/master/notebooks/inference_playground.ipynb

SAM model co-lab notebook used and edited:
https://colab.research.google.com/drive/1FUunCmoHh1381NrKUEgkvoiycEz1w0g7?usp=sharing

Folders to roster photos (inputs and output folders included):
https://drive.google.com/drive/folders/1JptliP1eg5F5IgYY1YhioV9CzsR5IFKl?usp=sharing
